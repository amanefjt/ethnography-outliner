# タスク：高度なグループ化と関係線の最適化

グループ化機能の拡張、ネストされたグループの移動連動、および関係線の描画位置の改善を行う。

## 目的
- 関係線が要素（ノート・グループ）の重なりを考慮し、境界線から出るようにする。
- 3つ以上の任意の数のアイテムを一括でグループ化できるようにする。
- グループの中にグループがある（ネスト状態）場合でも、親を動かせばすべての子要素が正しく連動するようにする。

## 完了定義 (DoD)
- [ ] 関係線の端点が、接続先要素の外枠（エッジ）に自動的に配置される。
- [ ] 3つ、4つ、あるいはそれ以上のアイテムを選択した際に「n個をグループ化」ボタンが表示され、機能する。
- [ ] 多階層のグループ構造において、最上位の親グループをドラッグした際、階層下の全ノートおよび全サブグループが相対位置を保って移動する。
- [ ] ドラッグ終了後、すべての親グループの境界線が子要素を包むように正しく更新される。

## ステップ
1. [ ] `main.js`: 関係線の座標計算ロジック（`calculateRelationCoordinates`）を更新し、矩形との交差計算を導入。
2. [ ] `main.js`: `renderQuickActions` の制限を緩和し、3つ以上のアイテム選択時にもグループ化ボタンを表示。
3. [ ] `main.js`: `moveGroupAndChildren` およびドラッグ中の連動ロジックを見直し、再帰的な移動が完全であることを確認。
4. [ ] 動作確認。
