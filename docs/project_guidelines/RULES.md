# Project Rules

## 1. デザイン・ルール（「フィールド」としてのインターフェース）
- **流動性と曖昧さ (Fluidity & Ambiguity):** UIは、準備が整う前に構造を強制してはいけません。
    - *例:* 「ゴーストノート」（グループや親を持たないノート）は、視覚的に区別されつつも、完全に操作可能でなければなりません。
    - *例:* 認知モードの切り替えを反映し、キャンバス（空間的）とアウトライナー（線形的）の間の遷移はシームレスでなければなりません。
- **視覚的「ノイズ」は情報である:** キャンバスビューでは、空間的な近接性が重要です。
    - 重なり、緩やかな集合、そして「乱雑さ」を許容します。この乱雑さこそが、アブダクションの肥沃な土壌です。
    - コネクタ、近接性、色などの視覚的な手がかりを使用し、関係性を強制することなく示唆します。
- **集中のためのミニマリズム:** インターフェースは控えめであるべきです。主役はコンテンツ（民族誌的データ）です。
    - ユーザーのデータを際立たせるため、抑制されたカラーパレットを使用します。
- **結びつきこそが重要である:**
    - ノート間の「結びつき（Connection）」は、単なる視覚的なリンクではなく、論理的な接続です。
    - 結びつけ機能（Connect）を使用し、明示的な文脈のブリッジを作成します。
- **視点の制御 (Control of Perspective):**
    - ズームは「詳細（Close Reading）」と「俯瞰（Bird's-eye View）」を行き来する思考のダイナミクスです。
    - カーソル位置を中心としたズームにより、思考の対象を見失わないようにします。

## 2. コード・ルール（技術的基盤）
- **関心の分離 (Separation of Concerns):**
    - **State（真実）:** データ構造（ノート、グループ、関係）が唯一の真実です。これはビューから独立して存在します。
    - **View（レンズ）:** キャンバスとアウトライナーは、同じ基礎データに対する2つの異なる「レンズ」にすぎません。
- **データの整合性:**
    - すべてのノートは一意のIDを持ちます。
    - 親子関係は、単なる視覚的な包含ではなく、明示的なリンク（`groupId`）として保存されます。
    - 複雑な再構築中にデータが失われないよう、履歴（Undo/Redo）は「完全な状態」を追跡しなければなりません。
- **パフォーマンス:**
    - ツールは何百ものノートを遅延なく処理しなければなりません。「思考」が「待ち時間」によって中断されてはなりません。

## 3. 使用ルール（人類学者のプロトコル）
- **観察こそがすべて (Garbage In, Ethnography Out):**
    - 常に生の、具体的な観察（グラウンド・データ）から始めます。
    - 早急に抽象化してはいけません。「彼は神経質だった」という一般的な記述ではなく、「老人の手が震えていた」のような鮮明な記述を保ちます。
- **「関係性や意味の論理」で名づけ、「関係性や意味の断層」で分割:**
    - 表札（タイトル）は、既存のカテゴリ（衣食住）ではなく、その行為がどのような関係性における、どのような意味を持つ行為であり、なのかというベクトルで名付けます。
    - グループ内部に「不協和音（意味や関係性のずれ）」があれば、迷わず分割して対立を可視化します。
- **「B型」チェック:**
    - キャンバス（A型システム）で構造化したら、アウトライナー（B型システム）に切り替えて論理的な流れを検証します。
    - もしアウトラインがスムーズに流れないなら、空間的なグループ化が表層的だった可能性があります。キャンバスに戻ってください。
